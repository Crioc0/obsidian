---
created: 2025-09-30 16:24
tags:
  - express
---
# 202509301624
*Ссылка на StructureNote:* 
*Ссылка на исходник или контекст (если есть):* [ЯПрактикум](https://practicum.yandex.ru/learn/backend-nodejs/courses/16b47298-e20d-4fde-9619-1ab305039a00/sprints/564238/topics/511a777e-323b-4964-9150-d06eaeb48080/lessons/3d8e13d7-2dcf-49d1-aac9-2931ec400478/)

Чтобы записать данные в куки браузера, сервер должен отправить заголовок `Set-Cookie`:
```ts
res.set('Set-Cookie', 'name=Стас');
```

Получив такой заголовок, браузер сохранит `name=value` в куках.

Вручную устанавливать куки неудобно. Зато это удобно делать в Express — тут для этого есть метод `res.cookie`:
```ts
res.cookie('name', 'Стас');
```
Первый аргумент — это ключ, второй — значение.

Метод `res.cookie` особенно удобен для отправки опций, контролирующих поведение кук. К примеру, куки являются сессионными по умолчанию. Когда пользователь закрывает страницу, они удаляются. Это поведение можно изменить, отправив опцию `maxAge`. Она хранит срок жизни куки. Также по умолчанию к кукам есть доступ из JavaScript, это можно изменить опцией `httpOnly`. Можно указать браузеру, чтобы тот посылал куки, только если запрос сделан с того же домена. Для этого есть опция `sameSite`:
```ts
// отправим токен, браузер сохранит его в куках

res
  .cookie('jwt', token, {
        // token - наш JWT токен, который мы отправляем
    maxAge: 3600000,
    httpOnly: true,
    sameSite: true
  })
  .end(); // если у ответа нет тела, можно использовать метод end
```
JWT сохранится в куках, к которым у JavaScript-кода не будет доступа. Значит, токен украсть при XSS-атаке не получится.

### Связанные идеи:
* [[202509251447 Объект ответа res в express]]
---

*Что стоит развить? Какие вопросы возникли?*