---
created: 2025-10-07 15:50
tags:
  - vue
---
# 202510071550 Обработка событий в Vue

*Ссылка на StructureNote:*
*Ссылка на исходник или контекст (если есть):* 

## Прослушивание событий

Можно использовать директиву `v-on`, которую обычно сокращают до символа `@`, чтобы прослушивать события DOM и запускать JavaScript-код по их наступлению. Используется как `v-on:click="methodName"` или в сокращённом виде `@click="methodName"`.

Значение обработчика может быть одним из следующих:

1. **Обработчик события в виде инлайн-кода:** Код JavaScript будет выполняться при срабатывании события (аналогично как в нативном атрибуте `onclick`).

```js
const count = ref(0)
<button @click="count++">Добавить 1</button>
<p>Счётчик: {{ count }}</p>
```

2. **Обработчик события в виде метода:** Имя свойства или путь, указывающий на метод, объявленный в компоненте.

```js
const name = ref('Vue.js')

function greet(event) {
  alert(`Привет, ${name.value}!`)
  // `event` — нативное событие DOM
  if (event) {
    alert(event.target.tagName)
  }
}

<!-- `greet` — название метода, объявленного в компоненте выше -->
<button @click="greet">Поприветствовать</button>
```

### Написание обработчика методом vs. инлайн

Компилятор шаблонов определяет методы обработчиков, проверяя является ли строка значения `v-on` допустимым идентификатором JavaScript или путём для обращения к свойству. Например, `foo`, `foo.bar` и `foo['bar']` будут рассматриваться как обработчики методов, а `foo()` и `count++` — как инлайн.

## Вызов методов в инлайн-обработчиках

Вместо привязки непосредственно к имени метода, можно вызывать методы и в инлайн-обработчике. Это позволит передавать в метод вместо нативного события другие аргументы:

```js
function say(message) {
  alert(message)
}
<button @click="say('привет')">Скажи привет</button>
<button @click="say('пока')">Скажи пока</button>
```

## Доступ к событию через аргумент в инлайн-обработчиках

Иногда может потребоваться получить доступ к оригинальному событию DOM в инлайн-обработчике. Его можно явно передать в метод с помощью специальной переменной `$event` или воспользоваться стрелочной функцией:

```js
<!-- использование специальной переменной $event -->
<button @click="warn('Форму пока ещё нельзя отправить.', $event)">
  Отправить
</button>

<!-- использование стрелочной функции в инлайн-выражении -->
<button @click="(event) => warn('Форму пока ещё нельзя отправить.', event)">
  Отправить
</button>
```

```js
function warn(message, event) {
  // теперь есть доступ к нативному событию
  if (event) {
    event.preventDefault()
  }
  alert(message)
}
```

## Модификаторы событий

Часто необходимо вызвать `event.preventDefault()` или `event.stopPropagation()` внутри обработчиков события. Хотя это и легко можно делать внутри методов, но лучше когда методы содержат в себе только логику и не имеют дела с деталями реализации событий DOM.

Vue для решения этой задачи предоставляет **модификаторы событий** для `v-on`. Вспомните, что модификаторы — это постфиксы директивы, отделяемые точкой:

- `.stop`
- `.prevent`
- `.self`
- `.capture`
- `.once`
- `.passive`

```js
<!-- всплытие события click будет остановлено -->
<a @click.stop="doThis"></a>

<!-- событие submit перестанет перезагружать страницу -->
<form @submit.prevent="onSubmit"></form>

<!-- модификаторы можно объединять в цепочки -->
<a @click.stop.prevent="doThat"></a>

<!-- можно использовать без указания обработчиков -->
<form @submit.prevent></form>

<!-- вызов обработчика только в случае наступления события непосредственно -->
<!-- на данном элементе (то есть не на дочернем компоненте) -->
<div @click.self="doThat">...</div>
```

При использовании модификаторов имеет значение их порядок, потому что в той же очерёдности генерируется и соответствующий код. Поэтому `@click.prevent.self` предотвратит **действие клика по умолчанию на самом элементе и на его дочерних элементах**, в то время как `@click.self.prevent` предотвратит действие клика по умолчанию только на самом элементе. 

Также есть модификаторы для кнопок клавиатуры, сочетания клавиш и кнопок мыши

# Связанные идеи:

* [[202510071527 Директивы во vue]]
---

*Что стоит развить? Какие вопросы возникли?*
