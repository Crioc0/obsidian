---
created: 2025-09-27 18:28
tags:
  - backend
  - express
---
# 202509271828
*Ссылка на StructureNote:* [[02 Structure notes/Express|Express]]
*Ссылка на исходник или контекст (если есть):* [ЯПрактикум](https://practicum.yandex.ru/learn/backend-nodejs/courses/16b47298-e20d-4fde-9619-1ab305039a00/sprints/564238/topics/7c96eb76-3d6b-4f26-8c50-71c3fa757f2b/lessons/c164011c-29b7-4b62-8c4a-692aa56bcf6c/)

Принято обрабатывать ошибки централизованно. Для этого нам потребуется:

1. добавить специальный мидлвар-обработчик,
2. пробросить ошибки контроллера в него,
3. описать собственные классы ошибок, внутри которых мы определим HTTP-статус ответа.

В Express для обработки ошибок используется специальный обработчик
```ts
app.use((err, req, res, next) => {
  // это обработчик ошибки
});
```
Чтобы обработчик сработал корректно, его необходимо определить последним, после всех `app.use`. Обычно это делают где-то в конце файла.

Чтобы пробросить ошибку в мидлвар, нужно передать ошибку в качестве параметра в next()

Чтобы повторно не объявлять повторяющиеся ошибки, такие как NotFoundError, можно сделать кастомные ошибки, унаследовав от стандартной ошибки и выставляет свойство `statusCode`
```ts
// errors/not-found-err.js

class NotFoundError extends Error {
  constructor(message) {
    super(message);
    this.statusCode = 404;
  }
}

module.exports = NotFoundError;
```
После создания конструктора `NotFoundError`, его можно импортировать в другие места кода и использовать вместе с инструкцией `throw`:
### Связанные идеи:
* [[202509251537 Мидлвары в express]]
---

*Что стоит развить? Какие вопросы возникли?*