---
created: 2025-09-30 15:11
tags:
  - security
repeat: spaced every day
due_at: 2025-10-24T06:00:00.000+03:00
---
# 202509301511 XSS

*Ссылка на StructureNote:* [[Security]]
*Ссылка на исходник или контекст (если есть):* [ЯПрактикум](https://practicum.yandex.ru/learn/backend-nodejs/courses/16b47298-e20d-4fde-9619-1ab305039a00/sprints/564238/topics/511a777e-323b-4964-9150-d06eaeb48080/lessons/7fb4f5c7-cb70-4243-904c-c4ff8d37469a/)

Межсайтовый скриптинг (Cross-Site Scripting, сокращённо — XSS, чтобы не путать с CSS).

Для организации XSS-атаки злоумышленник редактирует страницу и внедряет в неё вредоносный код. Страница сохраняется на сервере и выдаётся другим пользователям. 

Чаще всего эта уязвимость возникает, если пользовательские данные встраиваются в страницу «как есть» при помощи свойства элемента `innerHtml`.

Даже если не использовать innerHTML, в ссылку можно вставить вредоносный код, а затем вынудить другого пользователя эту ссылку открыть

```ts
// Такая ссылка может прийти в письме «Перейдите по ссылке, чтобы получить свой выигрыш!»
`http://example.com/?name=Виктор+<script>alert('Hacked!');</script>`
```

В новых браузерах на движке Chromium предусмотрена защита, так что попытка открыть такую ссылку приведет к ошибке.

Но Internet Explorer никакой ошибки не выдаст, а послушно выполнит вредоносный код. Да и на хромиумы полагаться не стоит, от такого кода они не защитят

```ts
'http://example.com/?name=Виктор+<b><a href="http://сайтхакера">YOU WON $100000</a>'
```

Хакер может пойти ещё дальше: сократить ссылку специальным сервисом, исполнить скрипт на компьютере пользователя и перенаправить его на исходный сайт. Так пользователь и не заметит, что произошло что-то неладное.

### Как бороться?

1) Ограничивать пользовательский вход по принципу что не разрешено - запрещено, если пользователь вводит неразрешенные символы, сайт их либо отбразывает, либо сообщает об ошибке
2) Экранировать символы в HTML. Тогда браузер не будет воспринимать их как код. Экранирование защищает от внедрения скриптов.

### Связанные идеи:

* [[202509301608 Экранирование символов в Node.js]]
* [[202509301611 Content Security Policy]]
---

*Что стоит развить? Какие вопросы возникли?*
