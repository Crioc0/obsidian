---
created: 2025-09-30 13:54
tags:
  -
---
# 202509301354
*Ссылка на StructureNote:* [[02 Structure notes/Express|Express]]
*Ссылка на исходник или контекст (если есть):* [ЯПрактикум](https://practicum.yandex.ru/learn/backend-nodejs/courses/16b47298-e20d-4fde-9619-1ab305039a00/sprints/564238/topics/7c96eb76-3d6b-4f26-8c50-71c3fa757f2b/lessons/3293dc4e-15ac-48f7-afc6-4e8f16466a2f/) [NPM](https://www.npmjs.com/package/express-winston) 

Чтобы можно было работать с `winston`, потребуется мидлвар `express-winston`
Этот пакет добавляет свои обработчики запросов, поэтому нам не нужно вручную записывать сообщения в логи — это будет происходить автоматически. После установки этих двух пакетов (`winston` и `express-winston`), их можно импортировать.

После этого нужно создать логер. Мы будем логировать два типа информации — запросы к серверу и ошибки, которые на нём происходят. Для создания логера запросов воспользуемся функцией `logger` модуля `expressWinston`:
```ts
// middlewares/logger.ts

import winston from 'winston';
import expressWinston from 'express-winston';

// создадим логер запросов
const requestLogger = expressWinston.logger({
  transports: [
    new winston.transports.Console({
      format: winston.format.simple(),
    }),
    new winston.transports.File({ 
      filename: 'request.log',
    }),
  ],
  format: winston.format.json(),
});
```
Опция `transports` — массив, в котором мы можем передать различные транспорты для логов [web-plus_noda-logger_lesson4_transport].

Вторая опция — `format` — отвечает за формат записи логов. Для каждого транспорта мы можем задать свой собственный формат.

Логер запросов создан, теперь сделаем логер ошибок. Он нужен, чтобы в случае возникновения ошибки в лог записывалась информация о ней: имя ошибки, сообщение и стектрейс. Логер для ошибок Express создаётся методом `errorLogger` модуля `expressWinston`
```ts
// middlewares/logger.ts

import winston from 'winston';
import expressWinston from 'express-winston';

const requestLogger = expressWinston.logger({
  transports: [
    new winston.transports.File({ filename: 'request.log' }),
  ],
  format: winston.format.json(),
});

// логер ошибок
const errorLogger = expressWinston.errorLogger({
  transports: [
    new winston.transports.File({ filename: 'error.log' }),
  ],
  format: winston.format.json(),
});
```
### Связанные идеи:
* 
---

*Что стоит развить? Какие вопросы возникли?*