---
created: 2025-10-22 13:06
tags:
  - computerScience
level:
  -
---
*Ссылка на StructureNote:*
*Ссылка на исходник или контекст (если есть):*
- [[202510221200 Протокол управления передачей данных(TCP)]]

# 202510221306 TCP-сокеты

Сокеты TCP могут быть активными или пассивными. К соединению можно привязать только **активные сокеты**. Когда TCP-сокеты создаются, они активны по умолчанию. Вот как клиент запускает соединение:

```
active_socket ← Socket.new(IP, TCP) 
port_number ← 80 
server_ip ← 2a03:2880:f003:c07:face:b00c::2 
active_socket.connect(server_ip, port_number) 
active_socket.send("When is Charles' birthday?")
```

Клиенту нужно просто указать IP-адрес хоста-сервера и номер порта, который этот сервер прослушивает. Все процедуры по запуску и поддержанию TCP-соединения выполняются хостом за кулисами. После успешного выполнения connect() могут быть вызваны send() и recv() для обмена данными.

Чтобы ожидать и принимать запросы на соединение с заданным номером порта, необходимо использовать **пассивный сокет**. Сокет становится пассивным после привязки к номеру порта и вызова его метода listen(). Вот как сервер ожидает подключения к порту 80:

```
server_socket ← Socket.new(IP, TCP) 
server_socket.bind(80) 
server_socket.listen() 
active_socket ← server_socket.accept()
```

Сервер выбирает номер своего порта. Если у другого приложения уже есть сокет, привязанный к тому же порту, bind() выдаст ошибку. Когда вызывается accept(), сервер останавливается до тех пор, пока не поступит новый запрос на соединение, после чего создается новое TCPсоединение. Новое соединение привязывается к только что созданному активному сокету. Исходный пассивный сокет можно использовать для приема других подключений к другим хостам. Вновь созданный активный сокет можно использовать для связи с клиентом путем вызова для него send() и recv().

Часто серверы продолжают работу accept() в цикле, чтобы установить множество TCP-соединений снесколькими клиентами иобщаться со всеми ними одновременно. Именно так веб-сервер может одновременно обслуживать тысячи или даже миллионы различных клиентских приложений.

# Связанные идеи

- 

---

*Что стоит развить? Какие вопросы возникли?*
