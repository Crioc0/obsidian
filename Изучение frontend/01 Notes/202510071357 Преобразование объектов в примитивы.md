---
created: 2025-10-07 13:57
tags:
  - javaScript
---
# 202510071357 Преобразование объектов в примитивы

*Ссылка на StructureNote:*
*Ссылка на исходник или контекст (если есть):* 

## Когда происходит преобразование

Преобразование объекта в примитив вызывается автоматически, когда объект используется в контексте, где ожидается примитивное значение:

```js
let obj = {name: "John"};

alert(obj); // преобразование в строку
+obj;       // преобразование в число
obj == 1;   // преобразование для сравнения
```

## Три типа хинтов (hints)

1. **`"string"`** — когда нужна строка:

```js
alert(obj);
String(obj);
obj + " text";
```

2. **`"number"`** — когда нужна строка:

```js
+obj;
Number(obj);
obj > 0;
```

3. **`"default"`** — когда оператор не уверен, какой тип нужен:

```js
obj == 1;
obj + obj;
```

## Алгоритм преобразования

### 1. Symbol.toPrimitive (приоритетный метод)

```js
let user = {
    name: "John",
    age: 30,
    
    [Symbol.toPrimitive](hint) {
        alert(`hint: ${hint}`);
        return hint == "string" ? `{name: "${this.name}"}` : this.age;
    }
};

alert(user); // hint: string -> {name: "John"}
+user;       // hint: number -> 30
user + 10;   // hint: default -> 40

```

### 2. Для хинта "string"

Порядок вызова:

1. `obj.toString()` (если существует)
    
2. `obj.valueOf()` (если toString не вернул примитив)

javascript

```js
et user = {
    name: "John",
    
    toString() {
        return this.name;
    },
    
    valueOf() {
        return 30;
    }
};

alert(user); // "John" (использован toString)
```

### 3. Для хинтов "number" и "default"

Порядок вызова:

1. `obj.valueOf()` (если существует)
    
2. `obj.toString()` (если valueOf не вернул примитив)

javascript

```js
let user = {
    name: "John",
    
    valueOf() {
        return 30;
    },
    
    toString() {
        return this.name;
    }
};

+user;     // 30 (использован valueOf)
user + 10; // 40 (использован valueOf)
```

# Связанные идеи:

* [[202510071344 Объекты в JS]]
---

*Что стоит развить? Какие вопросы возникли?*
