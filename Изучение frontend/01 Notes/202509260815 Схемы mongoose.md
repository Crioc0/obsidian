---
created: 2025-09-26 08:15
tags:
  - mongoose
  - backend
---
# 202509260815
*Ссылка на StructureNote:* [[02 Structure notes/Mongoose|Mongoose]]
*Ссылка на исходник или контекст (если есть):* [ЯПрактикум](https://practicum.yandex.ru/learn/backend-nodejs/courses/16b47298-e20d-4fde-9619-1ab305039a00/sprints/564238/topics/a4928f0d-5f69-4053-bea3-fa90d3a2a89f/lessons/15cef645-c2a0-4925-9e9b-bb174e07ec2e/)

Схема - набор требований к данным. В MongoDB нет поддержки схем по умолчанию, но их можно добавить через mongoose. Это нужно для проверки, соответствует ли документ схеме, прежде чем записывать его в БД.

Помимо стандартных проверок, в mongoose можно писать и свои проверки данных с помощью свойства `validate`. Это объект, свойствами которого являются:
1) validator -функция валидации, возвращающая булевое значение
2) message - сообщение об ошибке, срабатывает при false в validator
```ts
// models/user.ts
import mongoose from "mongoose";

const UserSchema = new mongoose.Schema({
  name: { 
    type: String, 
    required: true, 
    minlength: 2,
    maxlength: 30, 
  },
  gender: {
    type: String, // гендер — это строка
    enum: ['м', 'ж', 'другой']
  },
    age: {
        type: Number,
        validate: { // опишем свойство validate
            validator(v: Number) { // validator - функция проверки данных. v - значение свойства age
                return v >= 18; // если возраст меньше 18, вернётся false
            },
            message: 'Вам должно быть больше 18 лет!', // выводится в случае false
        }
    },
  about: String, 
});
```

Можно сделать свойство документа объектом, для это нужно создать схему и передать ее в качестве значения нужному свойству
Также можно указать, что значение может быть массивом документов, для этого нужно заключить его в квадратные скобки 
### Связанные идеи:
* [[202509260828 Модели mongoose]]
* [[202509261042 Cоздание связей для схем Mongoose]]
---

*Что стоит развить? Какие вопросы возникли?*
1) Свойства для валидации