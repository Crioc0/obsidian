---
created: 2025-10-08 13:17
tags:
  - vue
---
# 202510081317
*Ссылка на StructureNote:*
*Ссылка на исходник или контекст (если есть):* 

Обратный вызов наблюдателя обычно использует то же реактивное состояние, что и источник. Например,  следующий код использует наблюдатель для загрузки удаленного ресурса каждый раз, когда изменяется ссылка `todoId`
```js
const todoId = ref(1)
const data = ref(null)

watch(
  todoId,
  async () => {
    const response = await fetch(
      `https://jsonplaceholder.typicode.com/todos/${todoId.value}`
    )
    data.value = await response.json()
  },
  { immediate: true }
)
```
watcher использует `todoId` дважды, один раз в качестве источника, а затем снова внутри обратного вызова.

Это можно упростить с помощью функции [`watchEffect()`](https://ru.vuejs.org/api/reactivity-core.html#watcheffect). `watchEffect()` позволяет нам немедленно выполнить побочный эффект, автоматически отслеживая реактивные зависимости. Приведенный выше пример можно переписать следующим образом:
```js
watchEffect(async () => {
  const response = await fetch(
    `https://jsonplaceholder.typicode.com/todos/${todoId.value}`
  )
  data.value = await response.json()
})
```
### `watch` vs. `watchEffect`

`watch` и `watchEffect` оба позволяют нам реактивно выполнять побочные эффекты. Их основное различие заключается в том, как они отслеживают свои реактивные зависимости:

- `watch` отслеживает только явно указанный источник. Он не будет отслеживать ничего, к чему обращаются внутри обратного вызова. Кроме того, обратный вызов срабатывает только тогда, когда источник действительно изменился. `watch` отделяет отслеживание зависимости от побочного эффекта, давая нам более точный контроль над тем, когда должен сработать обратный вызов.
    
- `watchEffect`, с другой стороны, объединяет отслеживание зависимостей и побочный эффект в одну фазу. Он автоматически отслеживает каждое реактивное свойство, доступ к которому осуществляется во время его синхронного выполнения. Это более удобно и обычно приводит к более лаконичному коду, но делает его реактивные зависимости менее явными.
# Связанные идеи:
* [[202510081310 Наблюдатели Vue]]
---

*Что стоит развить? Какие вопросы возникли?*