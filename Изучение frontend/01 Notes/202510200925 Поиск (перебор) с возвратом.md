---
repeat: spaced every 24 hours
created: 2025-10-20 09:25
tags:
  - computerScience
due_at: 2025-10-24T10:45:26.109+03:00
---
# 202510200925 Поиск (перебор) с возвратом

*Ссылка на StructureNote:*
*Ссылка на исходник или контекст (если есть):*

> Задача о восьми ферзях Как разместить восемь ферзей на доске так, чтобы ни один из них не оказался под ударом других?

Восемь ферзей можно разместить на шахматной доске более чем 4 млрд способами. Искать решение полным перебором как минимум неосмотрительно.

Предположим, что первые два ферзя помещены на доску таким образом, что представляют угрозу друг для друга. Тогда независимо от того, где окажутся следующие ферзи, решение найти не удастся.

Более эффективный поход состоит в поиске только приемлемых позиций для фигур. Первого ферзя можно поместить куда угодно. Приемлемые позиции для каждого следующего будут ограничены уже размещенными фигурами: нельзя ставить ферзя на клетку, находящуюся под ударом другого ферзя. Если мы начнем руководствоваться этим правилом, мы, вероятно, получим доску, где невозможно разместить дополнительного ферзя, еще до того, как число фигур дойдет до восьми

Это будет означать, что последнего ферзя мы разместили неправильно. Потому нам придется отойти назад — вернуться к предыдущей позиции и продолжить поиск. В этом заключается суть стратегии поиска с возвратом: продолжать размещать ферзей в допустимые позиции. Как только мы окажемся в тупике, мы отойдем назад, к моменту, предшествовавшему размещению последнего ферзя. Этот процесс можно оптимизировать при помощи рекурсии

```
function queens(board)
    if board.has_8_queens
        return board
    for each position in board.unattacked_positions
        board.place_queen(position)
        solution ← queens(board)
        if solution
            return solution
        board.remove_queen(position)
    return False
```

Если требуемое по условию сочетание позиций на доске еще не найдено, функция обходит все приемлемые позиции для следующего ферзя. Она использует рекурсию, чтобы проверить, даст ли размещение ферзя в каждой из этих позиций решение

![[Поиск с возвратом.png]]

# Связанные идеи

- [[202510200909 Полный перебор]]

---

*Что стоит развить? Какие вопросы возникли?*
