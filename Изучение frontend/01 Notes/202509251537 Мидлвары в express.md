---
created: 2025-09-25 15:37
tags:
  - backend
  - express
  - уровень_1
repeat: spaced every 48 hours
due_at: 2025-10-26T08:37:25.208+03:00
---
# 202509251537 Мидлвары в express

*Ссылка на StructureNote:* [[02 Structure notes/Express|Express]]
*Ссылка на исходник или контекст (если есть):* [ЯПрактикум](https://practicum.yandex.ru/learn/backend-nodejs/courses/16b47298-e20d-4fde-9619-1ab305039a00/sprints/564238/topics/1839b729-54bc-4e2b-92a4-271a0d268cb8/lessons/da2e892e-11a6-4cb8-a20d-1ecce7be40e8/)

Мидлвары - это функции промежуточной обработки. Мидлвары обрабатывают запросы пользователей, корректируют при необходимости или вовсе не пускают их дальше. В мидлвар удобно выносить и типовые задачи.

```ts
// Проверим, существует ли пользователь:
const doesUserExist = (req: Request, res: Response, next: NextFunction) => {
  if (!users[req.params.id]) {
    res.send(`Такого пользователя не существует`);
    return;
  }

  next(); // вызываем next
};

const sendUser = req: Request, res: Response, next: NextFunction) => {
  res.send(users[req.params.id]);
};
```

Фреймворк express написан так, что если для одного запроса написано несколько обработчиков, он будет считать функцией `next` следующий обработчик этого же запроса

```ts
const doesUserExist = (req: Request, res: Response, next: NextFunction) => {
  if (!users[req.params.id]) {
    res.send(`Такого пользователя не существует`);
    return; // если пользователя нет, мы выйдем из функции, и больше ничего происходить не будет
  }

  next(); // если движок дошёл до функции next, он будет искать следующий обработчик того же запроса
};
```

Мидлвар подключается с помощью app.use, но с одним параметром - самим мидлваром

```ts
app.use(middleware);
```

### Связанные идеи:

* 

---

*Что стоит развить? Какие вопросы возникли?*
