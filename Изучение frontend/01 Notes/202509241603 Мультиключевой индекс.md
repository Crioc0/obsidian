---
created: 2025-09-24 16:03
tags:
  - backend
  - basic
  - mongodb
repeat: spaced every 48 hours
due_at: 2025-10-26T08:35:12.420+03:00
---
# 202509241603 Мультиключевой индекс

*Ссылка на StructureNote:*
*Ссылка на исходник или контекст (если есть):* [Индексы Яндекс Практикум](https://practicum.yandex.ru/learn/backend-nodejs/courses/16b47298-e20d-4fde-9619-1ab305039a00/sprints/564238/topics/3850c616-bd4c-4c66-987e-9b4e0b0f135c/lessons/4ad26476-a188-46e9-b6d9-38486789cfe8/)

Многоключевой индекс — особый вид индекса, который применяется для массивов. Индекс строится по полю, в котором содержится массив. А ключ в таком индексе — элемент массива. Ключ указывает на несколько документов, а каждый документ может быть доступен по нескольким ключам.

Чтобы создать многоключевой индекс, дополнительно ничего указывать не нужно, MongoDB сделает это автоматически, если поле является массивом.

При использовании многоключевых индексов стоит помнить об ограничениях:

1. В составном индексе можно иметь только один multikey индекс.
2. При запросах на точное совпадение массива (`db.posts.find({tags: ["js", "ts"]})`) multikey индекс не будет использован.
3. MongoDB не будет использовать multikey индекс при использовании оператора `$expr` в фильтре.

### Связанные идеи:

* [[202509241122 Индексы в MongoDB]]

---

*Что стоит развить? Какие вопросы возникли?*
