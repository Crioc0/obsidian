---
created: 2025-10-06 11:57
tags:
  - typeORM
repeat: spaced every day
due_at: 2025-10-24T06:00:00.000+03:00
---
# 202510061157 Многие ко многим TypeORM

*Ссылка на StructureNote:*
*Ссылка на исходник или контекст (если есть):* [ЯПрактикум](https://practicum.yandex.ru/learn/backend-nodejs/courses/a4214ab0-2146-4152-b90e-651bf4c7ca5e/sprints/564244/topics/104f2765-a9c9-4617-8a5e-f21b675cf9b3/lessons/66392f72-0cb8-4373-984b-ada4c806cb74/)

Для Nest и TypeORM реализация такого отношения выглядит следующим образом:

```ts
// /entities/Country.entity.ts

import { Entity, PrimaryGeneratedColumn, Column, ManyToMany } from 'typeorm';
import { City } from './entities/City';

@Entity()
export class Country {
  @PrimaryGeneratedColumn()
  id: number;

  @Column()
  name: string;

  @ManyToMany(() => City, (city) => city.countries)
  cities: City[];
}
```

```ts
// /entities/City.entity.ts

import {
  Entity,
  PrimaryGeneratedColumn,
  Column,
  JoinTable,
  ManyToMany,
} from 'typeorm';
import { Country } from './Country';

@Entity()
export class Capital {
  @PrimaryGeneratedColumn()
  id: number;

  @Column()
  name: string;

  @ManyToMany(() => Country, (country) => country.cities)
  @JoinTable()
  countries: Country[];
}
```

`JoinTable` нужно написать только в одной из таблиц. В какой — не имеет принципиального значения, ведь связь симметричная, и это повлияет только на то, под каким именем будет автоматически сгенерирована таблица связей: `city_countries_country` или `country_cities_city`.

### Связанные идеи:

* [[202510061145 Виды связей в TypeORM]]

---

*Что стоит развить? Какие вопросы возникли?*
