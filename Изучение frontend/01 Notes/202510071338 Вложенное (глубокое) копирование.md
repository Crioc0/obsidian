---
created: 2025-10-07 13:38
tags:
  - javaScript
repeat: spaced every day
due_at: 2025-10-24T06:00:00.000+03:00
---
# 202510071338 Вложенное (глубокое) копирование

*Ссылка на StructureNote:*
*Ссылка на исходник или контекст (если есть):* 

### Проблема поверхностного копирования

Если одним из свойств объекта будет другой объект, то при обычном копировании создаётся ссылка на вложенный объект:

```ts
let user = {
    name: "John",
    sizes: {
        height: 182,
        width: 50
    }
};

let clone = Object.assign({}, user);
alert(user.sizes === clone.sizes); // true, тот же объект

// Изменение вложенного объекта затронет оба объекта
user.sizes.width = 60;
alert(clone.sizes.width); // 60
```

### Решение: глубокое клонирование

#### Рекурсивный подход

Нужно рекурсивно проверять каждое значение объекта и, если это объект, копировать его структуру:

```js
function deepClone(obj) {
    if (obj === null || typeof obj !== "object") {
        return obj;
    }
    
    let clone = Array.isArray(obj) ? [] : {};
    
    for (let key in obj) {
        if (obj.hasOwnProperty(key)) {
            clone[key] = deepClone(obj[key]);
        }
    }
    
    return clone;
}
```

#### Использование structuredClone()

Современный способ — использование глобального метода `structuredClone()`:

```js
let user = {
    name: "John",
    sizes: {
        height: 182,
        width: 50
    }
};

let clone = structuredClone(user);

alert(user.sizes === clone.sizes); // false, разные объекты

// Изменения не затрагивают оригинал
user.sizes.width = 60;
alert(clone.sizes.width); // 50 (не изменилось)
```

Метод `structuredClone()` создаёт полную (глубокую) копию объекта, включая все вложенные объекты.

# Связанные идеи:

* [[202510031450 Копирование объектов]]
---

*Что стоит развить? Какие вопросы возникли?*
