2025 07 0717 06
Tags: #vue 
###### Links: 
1) 
# Заметка
Вы можете следить за состоянием и его изменениями с помощью метода хранилища `$subscribe()`, аналогичного [методу subscribe](https://vuex.vuejs.org/api/#subscribe) во Vuex. Преимущество subscribe перед обычным watch заключается в том, что подписки срабатывают только один раз после изменений. 
```js
cartStore.$subscribe((mutation, state) => {
  // import { MutationType } from 'pinia'
  mutation.type // 'direct' | 'patch object' | 'patch function'
  // тоже самое что и cartStore.$id
  mutation.storeId // 'cart'
  // доступно только при mutation.type === 'patch object'
  mutation.payload // patch object passed to cartStore.$patch()

  // сохранять все состояние в local storage при каждом его изменении
  localStorage.setItem('cart', JSON.stringify(state))
})
```