2025 07 0319 38
Tags: 
###### Links: 
1) 
# Заметка
### Использование `<script setup>`[​](https://ru.vuejs.org/guide/typescript/composition-api.html#using-script-setup)

При использовании `<script setup>`, макрос `defineProps()` поддерживает вывод типов входных параметров на основе своего аргумента:
```js
<script setup lang="ts">
const props = defineProps({
  foo: { type: String, required: true },
  bar: Number
})

props.foo // string
props.bar // number | undefined
</script>
```
Однако обычно проще определять входные параметры с чистыми типами с помощью аргумента дженерик-типа:
```js
<script setup lang="ts">
const props = defineProps<{
  foo: string
  bar?: number
}>()
</script>
```
Можно также вынести типы отдельных параметров в отдельный интерфейс
```js
<script setup lang="ts">
interface Props {
  foo: string
  bar?: number
}

const props = defineProps<Props>()
</script>
```
Это также работает, если `Props` импортируется из внешнего файла. Эта функция требует, чтобы TypeScript был зависимостью от Vue.


```vue
<script setup lang="ts">
import type { Props } from './foo'

const props = defineProps<Props>()
</script>
```
### Значения по умолчанию входных параметров
Когда мы испоьзуем объявление типов, мы теряем возможность указать значение по умолчанию. С версии 3.5 это можно сделать благодаря дестркутуризации реактивных Props

```js
interface Props {
  msg?: string
  labels?: string[]
}

const { msg = 'hello', labels = ['one', 'two'] } = defineProps<Props>()
```
В версии 3.4 и ниже деструктуризация не включена по умолчанию. В качестве альтернативы можно использовать макрос компилятора withDefault
```js
interface Props {
  msg?: string
  labels?: string[]
}

const props = withDefaults(defineProps<Props>(), {
  msg: 'привет',
  labels: () => ['один', 'два']
})
```
Это будет скомпилировано во время выполнения в эквивалентные параметры `по умолчанию`. Кроме того, помощник `withDefaults` обеспечивает проверку типов для значений по умолчанию и гарантирует, что в возвращаемом типе `props` будут удалены необязательные флаги для свойств, для которых объявлены значения по умолчанию.
### Без `<script setup>`
Если не используется `<script setup>`, то для включения функции определения типа входного параметра необходимо использовать `defineComponent()`. Тип объекта входного параметра, переданного в `setup()` выводится из параметра `props`.
```js
import { defineComponent } from 'vue'

export default defineComponent({
  props: {
    message: String
  },
  setup(props) {
    props.message // <-- тип: string
  }
})
```