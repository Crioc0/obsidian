2025 06 2121 25
Tags: #vue 
###### Links: 
1) 
# Заметка
В compositionAPI рекомендуемым способом объявления реактивного состояния является использование ref() функции
`ref()` принимает аргумент и возвращает его завёрнутым в объект ref со свойством `.value`:
```js
const count = ref(0)

console.log(count) // { value: 0 }
console.log(count.value) // 0

count.value++
console.log(count.value) // 1
```
 Для удобства ref автоматически "разворачиваются" при использовании внутри шаблонов

Свойство `.value` дает [[Vue]] возможность обнаружить, когда к ссылке обращались или она была изменена. Под капотом Vue выполняет отслеживание в геттере, а срабатывание - в сеттере. Концептуально, вы можете представить себе ref как объект, который выглядит следующим образом:
```js
// псевдокод, а не реальная реализация
const myRef = {
  _value: 0,
  get value() {
    track()
    return this._value
  },
  set value(newValue) {
    this._value = newValue
    trigger()
  }
}
```
Рефы могут содержать значения любого типа, включая глубоко вложенные объекты, массивы или встроенные в JavaScript структуры данных типа `Map`.

Ссылка делает своё значение глубоко реактивным. Это означает, что вы можете ожидать обнаружения изменений даже при мутации вложенных объектов или массивов
```js
import { ref } from 'vue'

const obj = ref({
  nested: { count: 0 },
  arr: ['foo', 'bar']
})

function mutateDeeply() {
  // они будут работать, как и ожидалось.
  obj.value.nested.count++
  obj.value.arr.push('baz')
}
```
## reactive
Есть и другой способ объявить реактивное состояние - с помощью API `reactive()`. В отличие от ref, который оборачивает внутреннее значение в специальный объект, `reactive()` делает сам объект реактивным:
```js
import { reactive } from 'vue'

const state = reactive({ count: 0 })
```
Реактивные объекты представляют собой [JavaScript прокси](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy) и ведут себя так же, как обычные объекты. Разница в том, что Vue может перехватывать доступ и мутацию всех свойств реактивного объекта для отслеживания и запуска реактивности.
`reactive()` преобразует объект в глубину: вложенные объекты также оборачиваются `reactive()` при обращении к ним. Она также вызывается `ref()`, когда значение ссылки является объектом. Аналогично неглубоким ссылкам, существует также API [`shallowReactive()`](https://ru.vuejs.org/api/reactivity-advanced.html#shallowreactive) для отказа от глубокой реактивности. 
Важно отметить, что возвращаемое значение от `reactive()` является [прокси](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy) оригинального объекта, который не равен исходному объекту: