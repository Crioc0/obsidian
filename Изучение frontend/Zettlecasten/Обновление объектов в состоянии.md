2025 02 2420 44
Tags: #react 
###### Links: 
1) [[useState(состояние)]]
# Заметка
Технически, можно изменить содержимое самого объекта. Это называется мутацией. Однако, хотя объекты в React state технически являются изменяемыми, вы должны относиться к ним **как** к неизменяемым, как к числам, булевым числам и строкам. Вместо того чтобы изменять их, вы всегда должны заменять их.
Другими словами, вы должны относиться к любому объекту JavaScript, который вы помещаете в состояние, как к объекту только для чтения. Если просто поменять свойство объекта, React не будет знать, что что-то изменилось. Чтобы дейстительно вызвать повторный рендеринг, нужно создать новый объект и передать его в функцию установки состояния.
```js
onPointerMove={e => {
  setPosition({
    x: e.clientX,
    y: e.clientY
  });
}}
```
Если нужно изменить только одно свойство объекта, можно скопировать старый объект, поскольку изменилось только одно поле
```js
setPerson({
    firstName: e.target.value, // New first name from the input
    lastName: person.lastName,
    email: person.email,
});
```

```js
setPerson({
    ...person, // Copy the old fields
    firstName: e.target.value, // But override this one
});
```
	Можно обновить структуру вложенного массива следующим образом
```js
const [person, setPerson] = useState({
    name: 'Niki de Saint Phalle',
    artwork: {
        title: 'Blue Nana',
        city: 'Hamburg',
        image: 'https://i.imgur.com/Sd1AgUOm.jpg',
    },
});
```

Но в React состояние рассматривается как неизменяемое! Чтобы изменить `city`, вам сначала нужно создать новый объект `artwork` (предварительно заполненный данными из предыдущего объекта), а затем создать новый объект `person`, который указывает на новый `artwork`:
```js
const nextArtwork = {
    ...person.artwork,
    city: 'New Delhi',
};
const nextPerson = { ...person, artwork: nextArtwork };
setPerson(nextPerson);
```
или
```js
setPerson({
    ...person, // Copy other fields
    artwork: {
        // but replace the artwork
        ...person.artwork, // with the same one
        city: 'New Delhi', // but in New Delhi!
    },
});
```