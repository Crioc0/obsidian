2025 07 0410 10
Tags: #vue #typescript 
###### Links: 
1) 
# Заметка
Provide и inject обычно выполняются в отдельных компонентах. Для правильной типизации внедряемых значений Vue предоставляет интерфейс `InjectionKey`, который представляет собой общий тип, расширяющий `Symbol`. Он может быть использован для синхронизации типа внедряемого значения между провайдером и потребителем:
```js
import { provide, inject } from 'vue'
import type { InjectionKey } from 'vue'

const key = Symbol() as InjectionKey<string>

provide(key, 'foo') // предоставление нестрокового значения приведет к ошибке

const foo = inject(key) // тип foo: string | undefined
```
Рекомендуется помещать ключ инъекции в отдельный файл, чтобы его можно было импортировать в несколько компонентов.

При использовании строковых ключей инъекции тип инжектируемого значения будет `unknown` и должен быть явно объявлен через аргумент generic type:
```js
const foo = inject<string>('foo') // тип: string | undefined
```
Обратите внимание, что инжектируемое значение может быть `undefined`, поскольку нет никакой гарантии, что провайдер предоставит это значение во время выполнения.

Тип `undefined` может быть удалён путём предоставления значения по умолчанию:
```js
const foo = inject<string>('foo', 'bar') // тип: string
```
Если вы уверены, что значение всегда будет предоставлено, вы можете также принудительно привести значение:
```js
const foo = inject('foo') as string
```
