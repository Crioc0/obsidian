2025 07 0308 53
Tags: #vue 
###### Links: 
1) 
# Заметка
`<Suspense>` - это встроенный компонент для организации асинхронных зависимостей в дереве компонентов. Он может отображать состояние загрузки в ожидании разрешения нескольких вложенных асинхронных зависимостей в дереве компонентов.
Компонент `<Suspense>` дает нам возможность отображать состояния загрузки/ошибки верхнего уровня, пока мы ожидаем разрешения этих вложенных асинхронных зависимостей.

Существует два типа асинхронных зависимостей, которые может ждать `<Suspense>`:

1. Компоненты с асинхронным хуком `setup()`. Сюда относятся компоненты, использующие `<script setup>` с выражениями `await` верхнего уровня.
    
2. [Асинхронные компоненты](https://ru.vuejs.org/guide/components/async.html).
Асинхронные компоненты по умолчанию являются **"приостанавливаемыми"**. Это означает, что если в родительской цепочке у него есть `<Suspense>`, то он будет рассматриваться как асинхронная зависимость этого `<Suspense>`. Состояния загрузки будут контролироваться Suspense, а собственные параметры загрузки, ошибки, задержки и таймаута компонента будут игнорироваться.
Асинхронные компоненты могут отказаться от управления `Suspense` и позволить компоненту всегда контролировать собственное состояние загрузки, указав в параметрах `suspensible: false`.

## Состояние загрузки[​](https://ru.vuejs.org/guide/built-ins/suspense.html#loading-state)

Компонент `<Suspense>` имеет два слота: `#default` и `#fallback`. Оба слота допускают только **один** непосредственный дочерний узел. Узел в слоте по умолчанию показывается, если это возможно. Если это невозможно, то вместо него будет показан узел в слоте fallback.
```js
<Suspense>
  <!-- компонент с вложенными асинхронными зависимостями -->
  <Dashboard />

  <!-- загрузка состояния через #fallback слот -->
  <template #fallback>
    Загрузка...
  </template>
</Suspense>
```
При первом рендеринге Suspense выводит содержимое слота default
Если во время этого процесса будут обнаружены какие-либо асинхронные зависимости, то он перейдет в состояние **ожидания**. Во время ожидания будет отображаться содержимое резервного слота. Когда все асинхронные зависимости будут разрешены, `<Suspense>` перейдет в состояние **разрешения** и будет отображено содержимое разрешенного слота по умолчанию.
Находясь в разрешенном состоянии, `<Suspense>` вернется в состояние ожидания только в случае замены корневого узла слота `#default`. Новые асинхронные зависимости, вложенные глубже в дерево, **не приведут** к переходу `<Suspense>` в состояние ожидания.
Когда происходит возврат, содержимое резервной копии не будет отображаться немедленно. Вместо этого `<Suspense>` будет отображать предыдущее содержимое `#default`, ожидая разрешения нового содержимого и его асинхронных зависимостей. Такое поведение может быть настроено с помощью параметра `timeout`: `<Suspense>` будет переключаться на резервное содержимое, если для отображения нового содержимого по умолчанию требуется больше времени, чем `timeout`. При значении `timeout`, равном `0`, резервное содержимое будет отображаться сразу после замены стандартного содержимого.

