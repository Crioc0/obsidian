2025 09 1610 28
Tags: #MongoDB 
###### Links: 
1) 
# Заметка
Разреженные, или частичные, индексы позволяют создавать индекс не для всех документов в коллекции, а только для тех, которые подходят под определённое условие. Для построения индексов и их хранения нужно время и место на диске, а разреженные индексы — компромисс: используем меньше ресурсов, но индексируем только часть коллекции.
```ts
db.posts.createIndex(
    { "author.name": 1, "createdAt": -1 },
    { "partialFilterExpression": { "author.name": "johndoe" } }
);
```
Тогда запросы, которые удовлетворяют условию, будут использовать индекс, а остальные нет:
```ts
// используется индекс
db.posts.find({ "author.name": "johndoe" });

// индекс не используется
db.posts.find({ "author.name": "janedoe" });
```