2025 09 1215 23
Tags: #MongoDB 
###### Links: 
1) 
# Заметка
По умолчанию для полей, указанных в запросе, действует логический оператор `and`. То есть для запроса `{"age": { "$gte": 18 }, "phone": { "$exists": true }}` СУБД найдёт все документы, у которых `age >= 18` и `phone` существует.
MongoDB предоставляет 4 логических оператора: `$or`, `$nor`, `$not` и `$and`, которые можно комбинировать между собой.
```ts
{
  // выбираем все документы, в которых существует поле email ИЛИ поле phone
  "$or": [
    { "email": { "$exists": true } },
    { "phone": { "$exists": true } }
  ]
}
```
```ts
{
    // выбираем все документы, в которых username == "johndoe", а role или "admin", или "moderator"
  "$and": [
        { "$or": [ { "role": "admin" }, { "role": "moderator" ] },
        { "username": "johndoe" }
    ]
}
```
Логические операторы `$or`, `$nor` и `$and` можно использовать только на верхнем уровне фильтра.