2025 09 2312 40
Tags: #mongoose 
###### Links: 
1) 
# Заметка
Чтобы уменьшить вероятность атаки, нужно уменьшить количество шагов между получением запроса от пользователя до валидации. Для этого мы можем валидировать запросы до того, как они попадут в контроллер: проверить тело запроса, его заголовки и только затем пропускать его в контроллер. Если запрос не прошёл валидацию, сразу вернём пользователю ошибку. Таким образом, мы сильно ограничим возможности злоумышленника использовать потенциальные ошибки в коде
## Joi и celebrate
Существует множество инструментов и библиотек для валидации данных в Node.js, такие как `ajv`, `fastest-validator` и `celebrate`. Мы остановимся на последнем, и вот почему: `celebrate` легко интегрируется в проект на Express и «под капотом» использует проверенную временем библиотеку валидации `joi`.
```ts
const { celebrate, Joi } = require('celebrate');

router.post('/posts', celebrate({
  body: Joi.object().keys({
    title: Joi.string().required().min(2).max(30),
    text: Joi.string().required().min(2),
  }),
}), createPost);
```