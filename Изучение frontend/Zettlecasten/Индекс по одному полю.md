2025 09 1609 06
Tags: #mongodb
###### Links: 
1) 
# Заметка
## Индекс по одному полю (single field index)
Индекс, позволяющий искать данные по одному полю. Чтобы создать, нужно использовать метод коллекции createIndex. Это основная сигнатура метода вызова
```ts
interface Collection {
  createIndex(spec: {[key: string]: -1 | 1}, options?: CreateIndexesOptions)
}
```
Принимает объект, ключами которого являются имена полей, а значениями - числа -1 и 1 - сортировка индекса по убыванию или возрастанию. Опциональный параметр options отвечает за свойства индекса.
```ts
db.users.createIndex({ "username": 1 });
```
Теперь, если в запросе используется поле username, MongoDB не будет выполнять полное сканирование коллекции, а просто найдет документы в индексе. А затем применит другие фильтры, если они есть:
```ts
// сначала получаем документы из индекса, затем фильтруем по возрасту
db.users.find({ "username": /john/i, "age": { "$gte": 18 } });
```
Индексы можно создавать и из вложенных документов, и запрос необязательно должен быть строгим сравнением