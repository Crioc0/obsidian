2025 09 0916 39
Tags: #nodejs 
###### Links: 
1) 
# Заметка
Процесс обработки событийного цикла состоит из шести фаз
1) Обработка таймеров
2) Обработка коллбэков ввода/вывода(input/output pending callbaks)
3) Ожидание/подготовка (prepartion)
4) Опрос(polling)
5) Проверка(check)
6) Обработка close-колбэков
## Обработка таймеров
На данном этапе выполняется код, инициированный при помощи функций обратного вызова `setTimeout()` или `setInterval()`. Для этого из очереди берётся колбэк таймера, для которого наступило время выполнения. Колбэки для таймеров , время которых уже пришло, запускаются в порядке очереди
## Обработка колбэков ввода-вывода (I/O pending callbacks)
Здесь выполняются все колбэки пользовательских асинхронных операций ввода и вывода. Например, колбэк, который запускается после записи или чтения файла, обрабатывается на этом этапе.
## Ожидание/Подготовка (preparation)
На этом этапе происходят внутренние системные операции, которые обеспечивают работу событийного цикла. Разработчику не видны
## Опрос (polling)
Это фаза, на которой движок Node.js ожидает возникновения новых событий I/O и пытается их обработать. Тут выполняются почти все функции обратного вызова, кроме `setTimeout`, `setInterval`, `setImmediate` и `close`. Если в очереди есть колбэки, они выполняются в порядке очереди. Если колбэков польще определенного количества, обработка остальных откладывается до следующей итерации
Если очередь обработки пуста, возможен один из следующих вариантов
1) Если в очереди `setImmediate` что-то есть, цикл событий завершит фазу опроса и перейдет к фазе проверки
2) Если очередь `setImmediate` пуста, цикл событий перейдет в фазу timer для выполнения колбэков
3) Если же отсутствуют и события `setImmediate`, и таймеры, время которых истекло, цикл событий останется в фазе опроса и будет ожидать добавления в очередь новых колбэков.
## Проверка (check)