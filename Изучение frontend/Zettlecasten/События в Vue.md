2025 06 2915 06
Tags: #vue 
###### Links: 
1) 
# Заметка
Компонент может генерировать пользовательские события непосредственно в выражениях шаблона (например, в обработчике `v-on`), используя встроенный метод `$emit`:
```js
<!-- MyComponent -->
<button @click="$emit('someEvent')">Нажми на меня</button>
```
Родительский компонент может прослушать его, используя `v-on`:
```js
<MyComponent @some-event="callback" />
```
Модификатор `.once` также поддерживается для слушателей событий компонента:
```js
<MyComponent @some-event.once="callback" />
```

## Аргументы события
Иногда бывает полезно передать определенное значение вместе с событием. Например, мы можем захотеть, чтобы компонент `<BlogPost>` отвечал за то, насколько увеличить текст. В таких случаях мы можем передать `$emit` дополнительные аргументы, чтобы предоставить это значение:
```js
<button @click="$emit('increaseBy', 1)">
  Увеличить на 1
</button>
```
Затем, когда мы прослушиваем событие в родителе, мы можем использовать встроенную стрелочную функцию в качестве слушателя, что позволит нам получить доступ к аргументу события:
```js
<MyButton @increase-by="(n) => count += n" />
```
Если обработчик события является методом
```js
<MyButton @increase-by="increaseCount" />
```
Затем значение будет передано в качестве первого параметра этого метода:`
```js
function increaseCount(n) {
  count.value += n
}
```
Все дополнительные аргументы, переданные в `$emit()` после имени события, будут переданы слушателю. Например, при `$emit('foo', 1, 2, 3)` функция обработчика события получит три аргумента.

## Определение пользовательских событий
События генерируемые компонентом можно объявить с помощью [`defineEmits()`](https://ru.vuejs.org/api/sfc-script-setup.html#defineprops-defineemits):
```js
<script setup>
defineEmits(['inFocus', 'submit'])
</script>
```
Метод `$emit`, который мы использовали в `<template>` недоступен в разделе `<script setup>` компонента, но `defineEmits()` возвращает эквивалентную функцию, которую мы можем использовать вместо него:
```js
<script setup>
const emit = defineEmits(['inFocus', 'submit'])

function buttonClick() {
  emit('submit')
}
</script>
```
Опция `emits` также поддерживает синтаксис объекта, что позволяет нам выполнять проверку полезной нагрузки пользовательских событий во время выполнения:
```js
<script setup lang="ts">
const emit = defineEmits({
  submit(payload: { email: string, password: string }) {
    // возвращает `true` или `false`, чтобы показать
    // что проверка пройдена / не пройдена
  }
})
</script>
```